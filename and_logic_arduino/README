http://hackaday.com/2015/10/01/arduino-development-theres-a-makefile-for-that/

